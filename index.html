<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<div class="box">
    <h2>Login</h2>
    <form id="loginForm">
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button type="submit">Login</button>
    </form>
</div>

<script>
$(function(){

    $("#loginForm").submit(function(e){
        e.preventDefault();

        let user = $("#username").val();
        let pass = $("#password").val();

        $.getJSON("data/users.json", function(data){

            let valid = data.find(u =>
                u.username === user && u.password === pass
            );

            if(valid){
                localStorage.setItem("loggedIn", true);
                localStorage.setItem("role", valid.role);

                if(valid.role === "admin"){
                    window.location.href = "dashboard.html";
                } else {
                    window.location.href = "courses.html";
                }

            } else {
                alert("Invalid Credentials");
            }

        });

    });

});
</script>

</body>
</html>
